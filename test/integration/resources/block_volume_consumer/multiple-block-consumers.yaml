apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: block-multi-consumer-rs
  labels:
    app: block-multi-consumer-test
spec:
  replicas: 3
  selector:
    matchLabels:
        app: block-multi-consumer-test
  template:
    metadata:
        name: block-multi-consumer-pod
        namespace: nvmesh-csi-testing
        labels:
            app: block-multi-consumer-test
    spec:
        containers:
          - name: block-volume-consumer
            image: excelero/block-consumer-test:develop
            env:
              - name: VOLUME_PATH
                value: /dev/my_block_dev
            volumeDevices:
              - name: block-volume
                devicePath: /dev/my_block_dev
        volumes:
            - name: block-volume
              persistentVolumeClaim:
                claimName: block-pvc
